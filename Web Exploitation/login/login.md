# login
##### Tags: `picoMini by redpwn` `Web Exploitation`
### DESCRIPTION
My dog-sitter's brother made this website but I can't get in; can you help? login.mars.picoctf.net
##### Một challenge liên quan đến đọc quá trình xử lý tên người dùng và mật khẩu
##### Mở BurpSuite, mở đường link và forward trang web, sau đó vòa phần `HTTP history`, vào phần `/index.js` với `MIMI type` dạng `script`:
##### Trong đấy sẽ có một đoạn code JavaScript không đồng bộ:
```javascript
(async()=>{
  await new Promise((e=>window.addEventListener("load",e))),document.querySelector("form").addEventListener("submit",(e=>{
    e.preventDefault();
    const r={
      u:"input[name=username]",p:"input[name=password]"
    },
    t={
    };
    for(const e in r)t[e]=btoa(document.querySelector(r[e]).value).replace(/=/g,"");
    return"YWRtaW4"!==t.u?alert("Incorrect Username"):"cGljb0NURns1M3J2M3JfNTNydjNyXzUzcnYzcl81M3J2M3JfNTNydjNyfQ"!==t.p?alert("Incorrect Password"):
    void alert(`Correct Password! Your flag is ${atob(t.p)}.`)}))})();
```
##### Có thể hiểu đoạn code là nhận tên và mật khẩu người dùng, sau đó so sánh với giá trị được mã hóa Base64, nếu đúng, sẽ trả về `flag`, hay về bản chất là mật khẩu.
##### Như vậy ta sẽ decode mật khẩu:
```
$ echo "cGljb0NURns1M3J2M3JfNTNydjNyXzUzcnYzcl81M3J2M3JfNTNydjNyfQ=" | base64 -d
picoCTF{53rv3r_53rv3r_53rv3r_53rv3r_53rv3r}
```
###### *Lưu ý cho thêm dấu '=' ở cuối vì trong đoạn code có hàm thay dấu '=' bằng khoảng trống: `replace(/=/g,"")`
##### => Lấy flag thành công!
